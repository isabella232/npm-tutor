#!/usr/bin/env node

var exercises = require(process.argv[2])
var exercise = exercises.getCurrent()

var isSilent = (function() {
  var before = process.argv
  process.argv = process.argv.filter(function(arg) {
    return arg !== '--silent'
  })
  return (before.length !== process.argv.length)
})()

function out() {
  if (isSilent) return
  console.log.apply(console, arguments)
}

if (!process.argv[3]) {
  out(JSON.stringify(exercise, null, 2))
  return
}

if (process.argv[3] === '--help') {
  out(Object.keys(exercise).join('\n'))
  return
}

var target = exercise[process.argv[3]]
if (typeof target == 'function') {
  out(target.apply(exercise, process.argv.slice(4)))
} else {
  out(target)
}
